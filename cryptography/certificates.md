# Certificates

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

<summary> <strong>æ”¯æŒhacktrickså¹¶è·å¾—å¥½å¤„ï¼</strong> </summary>

- Do you work in a **cybersecurity company**? Do you want to see your **company advertised in HackTricks**? or do you want to have access to the **latest version of the PEASS or download HackTricks in PDF**? Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

 - æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æ‚¨æ˜¯å¦æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨hacktricks **ä¸­åˆŠç™»å¹¿å‘Šï¼Ÿ è¿˜æ˜¯æ‚¨æƒ³è®¿é—®**æœ€æ–°ç‰ˆæœ¬çš„è±Œè±†æˆ–åœ¨pdf **ä¸­ä¸‹è½½hacktricksï¼Ÿ æ£€æŸ¥[**è®¢é˜…è®¡åˆ’**]ï¼ˆhttps://github.com/sponsors/carlospolopï¼‰ï¼

- Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)

 - å‘ç°[**è±Œè±†å®¶åº­**]ï¼ˆhttps://opensea.io/collection/the-peass-familyï¼‰ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[** nfts **]ï¼ˆhttps://opensea.io/collectionï¼‰ /å®¶åº­å®¶åº­ï¼‰

- Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

 - è·å–[**å®˜æ–¹è±Œè±†å’Œhacktricksèµƒç‰©**]ï¼ˆhttps://peass.creator-spring.comï¼‰

- **Join the** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

 -  **åŠ å…¥** [**ğŸ’¬**]ï¼ˆhttps://emojipedia.org/speech-balloon/ï¼‰[** discord group **]ï¼ˆhttps://discord.gg/hrep4ruj7fï¼‰æˆ–[ **ç”µæŠ¥ç»„**]ï¼ˆhttps://t.me/peassï¼‰æˆ–**åœ¨** Twitter ** [**ğŸ¦**]ï¼ˆhttps://github.com/carloppolop/hacktrickss on ** twitter **ï¼‰ /ree/7af18b62b3bdc423e114444444677a6a73d4043511e9/ \ [https:/emojipedia.org/bird/bird/readme.mdï¼‰eardme.mdï¼‰eghterme.mdï¼‰eghterme.mdï¼‰eghterme.mdï¼‰eghtemplopmbyth

- **Share your hacking tricks by submitting PRs to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)**.**

 -  **é€šè¿‡å°†PRSæäº¤ç»™** [** hacktricks github repo **]ï¼ˆhttps://github.com/carloppolop/hacktricksï¼‰**ã€‚

</details>

{% hint style="danger" %}
<img src="../.gitbook/assets/image (307).png" alt="" data-size="original">

<img src =â€œ ../ã€‚gitbook/assets/imageï¼ˆ307ï¼‰.pngâ€œ alt =â€â€œ data-size =â€œ ointernâ€>
Through Security Skills as a Service, we help organizations to **defend against the Dark Hacking Arts**. Security Skills as a Service is an offensive cybersecurity consultancy model that combines an Intelligent Platform with the top-class, globally distributed, offensive security engineers, delivering **high-quality penetration testing results. Security Hubs** bring together offensive penetration testing tactics with human behavioral science, providing real-time insights into threat actors' tradecraft and a **complete assessment of any risks**.

é€šè¿‡å®‰å…¨æŠ€èƒ½ä½œä¸ºæœåŠ¡ï¼Œæˆ‘ä»¬å¸®åŠ©ç»„ç»‡**é˜²å¾¡é»‘æš—é»‘å®¢è‰ºæœ¯**ã€‚ å®‰å…¨æŠ€èƒ½ä½œä¸ºæœåŠ¡æ˜¯ä¸€ç§è¿›æ”»æ€§ç½‘ç»œå®‰å…¨å’¨è¯¢æ¨¡å‹ï¼Œå°†æ™ºèƒ½å¹³å°ä¸é¡¶çº§ï¼Œå…¨çƒåˆ†å¸ƒå¼ï¼Œè¿›æ”»æ€§å®‰å…¨å·¥ç¨‹å¸ˆç»“åˆåœ¨ä¸€èµ·ï¼Œæä¾›**é«˜è´¨é‡çš„æ¸—é€æµ‹è¯•ç»“æœã€‚ å®‰å…¨æ¢çº½**å°†è¿›æ”»æ€§æ¸—é€æµ‹è¯•ç­–ç•¥ä¸äººç±»è¡Œä¸ºç§‘å­¦ç»“åˆåœ¨ä¸€èµ·ï¼Œæä¾›å¯¹å¨èƒå‚ä¸è€…è´¸æ˜“å…‹ç½—å¤«ç‰¹ï¼ˆTradecraftï¼‰çš„å®æ—¶è§è§£ï¼Œå¹¶å¯¹ä»»ä½•é£é™©**è¿›è¡Œå®Œæ•´è¯„ä¼°ã€‚

{% embed url="https://securityhubs.io/" %}
{% endhint %}

## What is a Certificate

##ä»€ä¹ˆæ˜¯è¯ä¹¦

In cryptography, a **public key certificate,** also known as a **digital certificate** or **identity certificate,** is an electronic document used to prove the ownership of a public key. The certificate includes information about the key, information about the identity of its owner (called the subject), and the digital signature of an entity that has verified the certificate's contents (called the issuer). If the signature is valid, and the software examining the certificate trusts the issuer, then it can use that key to communicate securely with the certificate's subject.

åœ¨å¯†ç å­¦ä¸­ï¼Œ**å…¬å…±å¯†é’¥è¯ä¹¦ï¼Œ**ä¹Ÿç§°ä¸º**æ•°å­—è¯ä¹¦**æˆ–**èº«ä»½è¯ä¹¦ï¼Œ**æ˜¯ä¸€ç§ç”µå­æ–‡æ¡£ï¼Œç”¨äºè¯æ˜å…¬å…±å¯†é’¥çš„æ‰€æœ‰æƒã€‚ è¯¥è¯ä¹¦åŒ…æ‹¬æœ‰å…³å¯†é’¥çš„ä¿¡æ¯ï¼Œæœ‰å…³å…¶æ‰€æœ‰è€…èº«ä»½ï¼ˆç§°ä¸ºä¸»é¢˜ï¼‰çš„ä¿¡æ¯ä»¥åŠå·²éªŒè¯è¯ä¹¦å†…å®¹çš„å®ä½“çš„æ•°å­—ç­¾åï¼ˆç§°ä¸ºå‘è¡Œè€…ï¼‰ã€‚ å¦‚æœç­¾åæœ‰æ•ˆï¼Œå¹¶ä¸”æ£€æŸ¥è¯ä¹¦çš„è½¯ä»¶ä¿¡ä»»å‘è¡Œäººï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¯¥é”®ä¸è¯ä¹¦çš„ä¸»é¢˜å®‰å…¨é€šä¿¡ã€‚

In a typical [public-key infrastructure](https://en.wikipedia.org/wiki/Public-key\_infrastructure) (PKI) scheme, the certificate issuer is a [certificate authority](https://en.wikipedia.org/wiki/Certificate\_authority) (CA), usually a company that charges customers to issue certificates for them. By contrast, in a [web of trust](https://en.wikipedia.org/wiki/Web\_of\_trust) scheme, individuals sign each other's keys directly, in a format that performs a similar function to a public key certificate.

åœ¨å…¸å‹çš„[public-keyåŸºç¡€æ¶æ„]ï¼ˆhttps://en.wikipedia.org/wiki/wiki/public-key \_Infrastructureï¼‰ï¼ˆPKIï¼‰æ–¹æ¡ˆï¼ˆPKIï¼‰æ–¹æ¡ˆï¼Œè¯ä¹¦å‘è¡Œäººæ˜¯[è¯ä¹¦æˆæƒ]ï¼ˆhttpsï¼š// en.wikipedia excipert ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨[https://en.wikipedia.org/wiki/web \_of_trustï¼‰æ–¹æ¡ˆä¸­ï¼Œä¸ªäººç›´æ¥äº’ç›¸ç­¾å è¯ä¹¦ã€‚

The most common format for public key certificates is defined by [X.509](https://en.wikipedia.org/wiki/X.509). Because X.509 is very general, the format is further constrained by profiles defined for certain use cases, such as [Public Key Infrastructure (X.509)](https://en.wikipedia.org/wiki/PKIX) as defined in RFC 5280.

å…¬å…±å¯†é’¥è¯ä¹¦çš„æœ€å¸¸è§æ ¼å¼ç”±[X.509]ï¼ˆhttps://en.wikipedia.org/wiki/x.509ï¼‰å®šä¹‰ã€‚ å› ä¸ºX.509éå¸¸é€šç”¨ï¼Œå› æ­¤æ ¼å¼è¿›ä¸€æ­¥å—åˆ°æŸäº›ç”¨ä¾‹å®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚[å…¬å…±å¯†é’¥åŸºç¡€æ¶æ„ï¼ˆX.509ï¼‰]ï¼ˆhttps://en.wikipedia.org/wiki/pkixï¼‰ä¸ºå®šä¹‰ åœ¨RFC 5280ä¸­ã€‚

## x509 Common Fields

## x509æ™®é€šå­—æ®µ

* **Version Number:** Version of x509 format.

***ç‰ˆæœ¬å·ï¼š** X509æ ¼å¼çš„ç‰ˆæœ¬ã€‚
* **Serial Number**: Used to uniquely identify the certificate within a CA's systems. In particular this is used to track revocation information.

***åºåˆ—å·**ï¼šç”¨äºå”¯ä¸€æ ‡è¯†CAç³»ç»Ÿä¸­çš„è¯ä¹¦ã€‚ ç‰¹åˆ«æ˜¯è¿™ç”¨äºè·Ÿè¸ªæ’¤é”€ä¿¡æ¯ã€‚
* **Subject**: The entity a certificate belongs to: a machine, an individual, or an organization.

***ä¸»é¢˜**ï¼šè¯ä¹¦å±äºï¼šæœºå™¨ï¼Œä¸ªäººæˆ–ç»„ç»‡çš„å®ä½“ã€‚
  * **Common Name**: Domains affected by the certificate. Can be 1 or more and can contain wildcards.

***é€šç”¨åç§°**ï¼šå—è¯ä¹¦å½±å“çš„åŸŸã€‚ å¯ä»¥æ˜¯1æˆ–æ›´å¤šï¼Œå¯ä»¥åŒ…å«é€šé…ç¬¦ã€‚
  * **Country (C)**: Country

***å›½å®¶ï¼ˆCï¼‰**ï¼šå›½å®¶
  * **Distinguished name (DN)**: The whole subject: `C=US, ST=California, L=San Francisco, O=Example, Inc., CN=shared.global.example.net`

***æ°å‡ºåç§°ï¼ˆDNï¼‰**ï¼šæ•´ä¸ªä¸»é¢˜ï¼š`c =æˆ‘ä»¬ï¼Œst = californiaï¼Œl =æ—§é‡‘å±±ï¼Œo = exampleï¼Œinc.ï¼Œcn = sharone.global.global.example.net`
  * **Locality (L)**: Local place

***å±€éƒ¨ï¼ˆLï¼‰**ï¼šæœ¬åœ°åœ°æ–¹
  * **Organization (O)**: Organization name
  * **Organizational Unit (OU)**: Division of an organisation (like "Human Resources").

***ç»„ç»‡éƒ¨é—¨ï¼ˆOUï¼‰**ï¼šç»„ç»‡çš„éƒ¨é—¨ï¼ˆä¾‹å¦‚â€œäººåŠ›èµ„æºâ€ï¼‰ã€‚
  * **State or Province (ST, S or P)**: List of state or province names

***å·æˆ–çœï¼ˆSTï¼ŒSæˆ–Pï¼‰**ï¼šå·æˆ–çœä»½åå•æ¸…å•
* **Issuer**: The entity that verified the information and signed the certificate.

***å‘è¡Œäºº**ï¼šéªŒè¯ä¿¡æ¯å¹¶ç­¾ç½²è¯ä¹¦çš„å®ä½“ã€‚
  * **Common Name (CN)**: Name of the certificate authority

***é€šç”¨åï¼ˆCNï¼‰**ï¼šè¯ä¹¦æˆæƒçš„åç§°
  * **Country (C)**: Country of the certificate authority

***å›½å®¶ï¼ˆCï¼‰**ï¼šè¯ä¹¦å±€çš„å›½å®¶
  * **Distinguished name (DN)**: Distinguished name of the certificate authority

***æ°å‡ºåç§°ï¼ˆDNï¼‰**ï¼šè¯ä¹¦æˆæƒçš„æ°å‡ºåç§°
  * **Locality (L)**: Local place where the organisation can be found.

***å±€éƒ¨ï¼ˆlï¼‰**ï¼šå¯ä»¥æ‰¾åˆ°ç»„ç»‡çš„æœ¬åœ°åœ°æ–¹ã€‚
  * **Organization (O)**: Organisation name
  * **Organizational Unit (OU)**: Division of an organisation (like "Human Resources").

***ç»„ç»‡éƒ¨é—¨ï¼ˆOUï¼‰**ï¼šç»„ç»‡çš„éƒ¨é—¨ï¼ˆä¾‹å¦‚â€œäººåŠ›èµ„æºâ€ï¼‰ã€‚
* **Not Before**: The earliest time and date on which the certificate is valid. Usually set to a few hours or days prior to the moment the certificate was issued, to avoid [clock skew](https://en.wikipedia.org/wiki/Clock\_skew#On\_a\_network) problems.

***åœ¨**ä¹‹å‰æ²¡æœ‰ï¼šè¯ä¹¦æœ‰æ•ˆçš„æœ€æ—©æ—¶é—´å’Œæ—¥æœŸã€‚ é€šå¸¸è®¾ç½®ä¸ºç¡®ä¿è¯ä¹¦çš„é‚£ä¸€åˆ»ä¹‹å‰çš„å‡ ä¸ªå°æ—¶æˆ–å‡ å¤©ï¼Œä»¥é¿å…[clock skew]ï¼ˆhttps://en.wikipedia.org/wiki/clock/clock_skew#un \ _a \ _networkï¼‰é—®é¢˜ã€‚
* **Not After**: The time and date past which the certificate is no longer valid.

***ä¸è¿½éš**ï¼šè¯ä¹¦ä¸å†æœ‰æ•ˆçš„æ—¶é—´å’Œæ—¥æœŸã€‚
* **Public Key**: A public key belonging to the certificate subject. (This is one of the main parts as this is what is signed by the CA)

***å…¬é’¥**ï¼šå±äºè¯ä¹¦ä¸»é¢˜çš„å…¬é’¥ã€‚ ï¼ˆè¿™æ˜¯ä¸»è¦éƒ¨åˆ†ä¹‹ä¸€ï¼Œå› ä¸ºè¿™æ˜¯CAç­¾åçš„ï¼‰
  * **Public Key Algorithm**: Algorithm used to generate the public key. Like RSA.

***å…¬é’¥ç®—æ³•**ï¼šç”¨äºç”Ÿæˆå…¬é’¥çš„ç®—æ³•ã€‚ åƒRSAã€‚
  * **Public Key Curve**: The curve used by the elliptic curve public key algorithm (if apply). Like nistp521.

***å…¬é’¥æ›²çº¿**ï¼šæ¤­åœ†æ›²çº¿å…¬å…±å¯†é’¥ç®—æ³•ä½¿ç”¨çš„æ›²çº¿ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ã€‚ åƒNISTP521ä¸€æ ·ã€‚
  * **Public Key Exponent**: Exponent used to derive the public key (if apply). Like 65537.

***å…¬é’¥æŒ‡æ•°**ï¼šç”¨äºå¾—å‡ºå…¬å…±å¯†é’¥çš„æŒ‡æ•°ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ã€‚ åƒ65537ã€‚
  * **Public Key Size**: The size of the public key space in bits. Like 2048.

***å…¬é’¥å°ºå¯¸**ï¼šä½äºä½çš„å…¬å…±å¯†é’¥ç©ºé—´çš„å¤§å°ã€‚ åƒ2048å¹´ã€‚
  * **Signature Algorithm**: The algorithm used to sign the public key certificate.

***ç­¾åç®—æ³•**ï¼šç”¨äºç­¾ç½²å…¬å…±å¯†é’¥è¯ä¹¦çš„ç®—æ³•ã€‚
  * **Signature**: A signature of the certificate body by the issuer's private key.

***ç­¾å**ï¼šå‘è¡Œäººçš„ç§é’¥ç­¾åè¯ä¹¦æ­£æ–‡ã€‚
* **x509v3 extensions**
  * **Key Usage**: The valid cryptographic uses of the certificate's public key. Common values include digital signature validation, key encipherment, and certificate signing.

***å¯†é’¥ç”¨æ³•**ï¼šè¯ä¹¦å…¬é’¥çš„æœ‰æ•ˆåŠ å¯†ç”¨é€”ã€‚ å…±åŒå€¼åŒ…æ‹¬æ•°å­—ç­¾åéªŒè¯ï¼Œå¯†é’¥ä»£ç å’Œè¯ä¹¦ç­¾åã€‚
    * In a Web certificate this will appear as a _X509v3 extension_ and will have the value `Digital Signature`

*åœ¨Webè¯ä¹¦ä¸­ï¼Œè¿™å°†æ˜¾ç¤ºä¸º_x509v3 Extension_ï¼Œå¹¶å°†å…·æœ‰``æ•°å­—ç­¾å''
  * **Extended Key Usage**: The applications in which the certificate may be used. Common values include TLS server authentication, email protection, and code signing.

***æ‰©å±•å¯†é’¥ç”¨æ³•**ï¼šå¯ä»¥ä½¿ç”¨è¯ä¹¦çš„åº”ç”¨ç¨‹åºã€‚ å…±åŒå€¼åŒ…æ‹¬TLSæœåŠ¡å™¨èº«ä»½éªŒè¯ï¼Œç”µå­é‚®ä»¶ä¿æŠ¤å’Œä»£ç ç­¾åã€‚
    * In a Web certificate this will appear as a _X509v3 extension_ and will have the value `TLS Web Server Authentication`

*åœ¨Webè¯ä¹¦ä¸­ï¼Œè¿™å°†æ˜¾ç¤ºä¸º_x509v3 Extension_ï¼Œå¹¶å°†å…·æœ‰`tls WebæœåŠ¡å™¨èº«ä»½éªŒè¯'çš„å€¼
  * **Subject Alternative Name:** Allows users to specify additional host **names** for a single SSL **certificate**. The use of the SAN extension is standard practice for SSL certificates, and it's on its way to replacing the use of the common **name**.

***ä¸»é¢˜æ›¿ä»£åç§°ï¼š**å…è®¸ç”¨æˆ·ä¸ºå•ä¸ªSSL **è¯ä¹¦æŒ‡å®šå…¶ä»–ä¸»æœº**åç§°** **ã€‚ SANæ‰©å±•çš„ä½¿ç”¨æ˜¯SSLè¯ä¹¦çš„æ ‡å‡†å®è·µï¼Œå®ƒæ­£åœ¨æ›¿æ¢ä½¿ç”¨Common **åç§°**çš„æ–¹å¼ã€‚
  * **Basic Constraint:** This extension describes whether the certificate is a CA certificate or an end entity certificate. A CA certificate is something that signs certificates of others and a end entity certificate is the certificate used in a web page for example (the last par of the chain).

***åŸºæœ¬çº¦æŸï¼š**æ­¤æ‰©å±•åæè¿°è¯ä¹¦æ˜¯CAè¯ä¹¦è¿˜æ˜¯æœ€ç»ˆå®ä½“è¯ä¹¦ã€‚ CAè¯ä¹¦æ˜¯ç­¾ç½²ä»–äººè¯ä¹¦çš„ä¸œè¥¿ï¼Œè€Œæœ€ç»ˆå®ä½“è¯ä¹¦æ˜¯ç½‘é¡µä¸­ä½¿ç”¨çš„è¯ä¹¦ï¼ˆé“¾çš„æœ€åä¸€ä¸ªæ ‡å‡†ï¼‰ã€‚
  * **Subject Key Identifier** (SKI): This extension declares a unique **identifier** for the public **key** in the certificate. It is required on all CA certificates. CAs propagate their own SKI to the Issuer **Key Identifier** (AKI) extension on issued certificates. It's the hash of the subject public key.

***ä¸»é¢˜å¯†é’¥æ ‡è¯†ç¬¦**ï¼ˆæ»‘é›ªï¼‰ï¼šæ­¤æ‰©å±•ç¨‹åºä¸ºå…¬å…±**é”®**å”¯ä¸€**æ ‡è¯†ç¬¦** **é”®** **ã€‚ æ‰€æœ‰CAè¯ä¹¦éƒ½éœ€è¦ã€‚ CASå°†è‡ªå·±çš„æ»‘é›ªæ¿ä¼ æ’­åˆ°å‘è¡Œè€…**å¯†é’¥æ ‡è¯†ç¬¦**ï¼ˆakiï¼‰å»¶é•¿çš„å‘è¡Œè¯ä¹¦ã€‚ è¿™æ˜¯ä¸»é¢˜å…¬é’¥çš„å“ˆå¸Œã€‚
  * **Authority Key Identifier**: It contains a key identifier which is derived from the public key in the issuer certificate. It's the hash of the issuer public key.

***æƒé™å¯†é’¥æ ‡è¯†ç¬¦**ï¼šå®ƒåŒ…å«ä¸€ä¸ªå¯†é’¥æ ‡è¯†ç¬¦ï¼Œè¯¥æ ‡è¯†ç¬¦æ˜¯ä»å‘è¡Œäººè¯ä¹¦ä¸­çš„å…¬é’¥ä¸­å¾—å‡ºçš„ã€‚ è¿™æ˜¯å‘è¡Œäººå…¬é’¥çš„å“ˆå¸Œã€‚
  * **Authority Information Access** (AIA): This extension contains at most two types of information :

***æƒé™ä¿¡æ¯è®¿é—®**ï¼ˆAIAï¼‰ï¼šæ­¤æ‰©å±•åæœ€å¤šåŒ…å«ä¸¤ç§ç±»å‹çš„ä¿¡æ¯ï¼š
    * Information about **how to get the issuer of this certificate** (CA issuer access method)

*æœ‰å…³**å¦‚ä½•è·å¾—æ­¤è¯ä¹¦çš„å‘è¡Œäºº**ï¼ˆCAå‘è¡Œè€…è®¿é—®æ–¹æ³•ï¼‰çš„ä¿¡æ¯
    * Address of the **OCSP responder from where revocation of this certificate** can be checked (OCSP access method).

*å¯ä»¥æ£€æŸ¥** ocspå“åº”è€…çš„åœ°å€ã€‚
  * **CRL Distribution Points**: This extension identifies the location of the CRL from which the revocation of this certificate can be checked. The application that processes the certificate can get the location of the CRL from this extension, download the CRL and then check the revocation of this certificate.

*** CRLåˆ†é…ç‚¹**ï¼šæ­¤æ‰©å±•åç¡®å®šå¯ä»¥æ£€æŸ¥è¯¥è¯ä¹¦çš„CRLçš„ä½ç½®ã€‚ å¤„ç†è¯ä¹¦çš„åº”ç”¨ç¨‹åºå¯ä»¥ä»æ­¤æ‰©å±•ç¨‹åºä¸­è·å–CRLçš„ä½ç½®ï¼Œä¸‹è½½CRLï¼Œç„¶åæ£€æŸ¥è¯¥è¯ä¹¦çš„æ’¤é”€ã€‚
  * **CT Precertificate SCTs**: Logs of Certificate transparency regarding the certificate

*** ct practificate scts **ï¼šè¯ä¹¦é€æ˜åº¦çš„æ—¥å¿—

### Difference between OCSP and CRL Distribution Points

### OCSPå’ŒCRLåˆ†é…ç‚¹ä¹‹é—´çš„å·®å¼‚

**OCSP** (RFC 2560) is a standard protocol that consists of an **OCSP client and an OCSP responder**. This protocol **determines revocation status of a given digital public-key certificate** **without** having to **download** the **entire CRL**.\

** OCSP **ï¼ˆRFC 2560ï¼‰æ˜¯ç”±** OCSPå®¢æˆ·ç«¯å’ŒOCSPå“åº”è€…**ç»„æˆçš„æ ‡å‡†åè®®ã€‚ æ­¤åè®®**ç¡®å®šç»™å®šæ•°å­—å…¬å¼€é”®è¯ä¹¦çš„æ’¤é”€çŠ¶æ€** **æ— éœ€**å¿…é¡»**ä¸‹è½½** **æ•´ä¸ªCRL **ã€‚\ \ \ \ \ \
**CRL** is the **traditional method** of checking certificate validity. A **CRL provides a list of certificate serial numbers** that have been revoked or are no longer valid. CRLs let the verifier check the revocation status of the presented certificate while verifying it. CRLs are limited to 512 entries.\

** crl **æ˜¯æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæ€§çš„**ä¼ ç»Ÿæ–¹æ³•**ã€‚ A ** CRLæä¾›äº†å·²è¢«æ’¤é”€æˆ–ä¸å†æœ‰æ•ˆçš„è¯ä¹¦åºåˆ—å·**åˆ—è¡¨ã€‚ CRLè®©éªŒè¯è€…åœ¨éªŒè¯å…¶éªŒè¯æ—¶æ£€æŸ¥åŠé”€è¯ä¹¦çš„æ’¤é”€çŠ¶æ€ã€‚ CRLä»…é™äº512ä¸ªæ¡ç›®ã€‚
From [here](https://www.arubanetworks.com/techdocs/ArubaOS%206\_3\_1\_Web\_Help/Content/ArubaFrameStyles/CertRevocation/About\_OCSP\_and\_CRL.htm).

æ¥è‡ª[æ­¤å¤„]ï¼ˆhttps://www.arubanetworks.com/techdocs/arubaos%206 \ _3 \_web_web \_web \ _help/content/arubaframesty/arubaframestyles/certrevocation/certrevocation/certrevocation/about \ out \ _ocspssp \ _and_andththtmï¼‰ã€‚

### What is Certificate Transparency

###ä»€ä¹ˆæ˜¯è¯ä¹¦é€æ˜åº¦

Certificate Transparency aims to remedy certificate-based threats by **making the issuance and existence of SSL certificates open to scrutiny by domain owners, CAs, and domain users**. Specifically, Certificate Transparency has three main goals:

è¯ä¹¦é€æ˜åº¦æ—¨åœ¨é€šè¿‡**ä½¿åŸŸæ‰€æœ‰è€…ï¼ŒCASå’ŒåŸŸç”¨æˆ·çš„å®¡æŸ¥çš„SSLè¯ä¹¦çš„å‘è¡Œå’Œå­˜åœ¨æ¥çº æ­£åŸºäºè¯ä¹¦çš„å¨èƒã€‚ å…·ä½“è€Œè¨€ï¼Œè¯ä¹¦é€æ˜åº¦å…·æœ‰ä¸‰ä¸ªä¸»è¦ç›®æ ‡ï¼š

* Make it impossible (or at least very difficult) for a CA to **issue a SSL certificate for a domain without the certificate being visible to the owner** of that domain.

*ä½¿CA **åœ¨æ²¡æœ‰è¯¥åŸŸçš„æ‰€æœ‰è€…**å¯è§çš„æƒ…å†µä¸‹ä¸ºåŸŸå‘å¸ƒSSLè¯ä¹¦ï¼Œä½¿å…¶ä¸å¯èƒ½ï¼ˆæˆ–è‡³å°‘å¾ˆå›°éš¾ï¼‰ã€‚
* Provide an **open auditing and monitoring system that lets any domain owner or CA determine whether certificates have been mistakenly or maliciously** issued.

*æä¾›ä¸€ä¸ª**å¼€æ”¾å®¡è®¡å’Œç›‘è§†ç³»ç»Ÿï¼Œä½¿ä»»ä½•åŸŸåæ‰€æœ‰è€…æˆ–CAç¡®å®šæ˜¯å¦å·²è¯¯ä»¥ä¸ºæˆ–æ¶æ„**ç­¾å‘è¯ä¹¦ã€‚
* **Protect users** (as much as possible) from being duped by certificates that were mistakenly or maliciously issued.

***ä¿æŠ¤ç”¨æˆ·**ï¼ˆå°½å¯èƒ½å¤šï¼‰è¢«é”™è¯¯æˆ–æ¶æ„é¢å‘çš„è¯ä¹¦æ¬ºéª—ã€‚

#### **Certificate Logs**

#### **è¯ä¹¦æ—¥å¿—**

Certificate logs are simple network services that maintain **cryptographically assured, publicly auditable, append-only records of certificates**. **Anyone can submit certificates to a log**, although certificate authorities will likely be the foremost submitters. Likewise, anyone can query a log for a cryptographic proof, which can be used to verify that the log is behaving properly or verify that a particular certificate has been logged. The number of log servers doesnâ€™t have to be large (say, much less than a thousand worldwide), and each could be operated independently by a CA, an ISP, or any other interested party.

è¯ä¹¦æ—¥å¿—æ˜¯ç®€å•çš„ç½‘ç»œæœåŠ¡ï¼Œå¯ç»´æŠ¤**å¯†ç ä¿è¯ï¼Œå…¬å¼€å®¡æ ¸ï¼Œä»…é™„åŠ è¯ä¹¦è®°å½•**ã€‚ **ä»»ä½•äººéƒ½å¯ä»¥å‘æ—¥å¿—æäº¤è¯ä¹¦**ï¼Œå°½ç®¡è¯ä¹¦æœºæ„å¯èƒ½æ˜¯æœ€é‡è¦çš„æäº¤è€…ã€‚ åŒæ ·ï¼Œä»»ä½•äººéƒ½å¯ä»¥æŸ¥è¯¢æ—¥å¿—ä»¥è·å–åŠ å¯†è¯æ˜ï¼Œå¯ä»¥ç”¨æ¥éªŒè¯æ—¥å¿—çš„è¡Œä¸ºæ­£ç¡®æˆ–éªŒè¯ç‰¹å®šè¯ä¹¦æ˜¯å¦å·²è®°å½•ã€‚ æ—¥å¿—æœåŠ¡å™¨çš„æ•°é‡ä¸ä¸€å®šè¦å¤§ï¼ˆä¾‹å¦‚ï¼Œåœ¨å…¨çƒèŒƒå›´å†…å°‘å¾—å¤šï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªäººéƒ½å¯ä»¥ç”±CAï¼ŒISPæˆ–ä»»ä½•å…¶ä»–æ„Ÿå…´è¶£çš„æ–¹ç‹¬ç«‹æ“ä½œã€‚

#### Query

ï¼ƒï¼ƒï¼ƒï¼ƒ è¯¢é—®

You can query the logs of Certificate Transparency of any domain in [https://crt.sh/](https://crt.sh).

æ‚¨å¯ä»¥æŸ¥è¯¢[https://crt.sh/]ï¼ˆhttps://crt.shï¼‰ä¸­ä»»ä½•åŸŸçš„è¯ä¹¦é€æ˜åº¦çš„æ—¥å¿—ã€‚

## Formats

There are different formats that can be used to store a certificate.

æœ‰ä¸åŒçš„æ ¼å¼å¯ç”¨äºå­˜å‚¨è¯ä¹¦ã€‚

#### **PEM Format**

#### ** PEMæ ¼å¼**

* It is the most common format used for certificates

*è¿™æ˜¯è¯ä¹¦æœ€å¸¸è§çš„æ ¼å¼
* Most servers (Ex: Apache) expects the certificates and private key to be in a separate files\

*å¤§å¤šæ•°æœåŠ¡å™¨ï¼ˆexï¼šapacheï¼‰æœŸæœ›è¯ä¹¦å’Œç§é’¥åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­\
  \- Usually they are Base64 encoded ASCII files\

\  - é€šå¸¸å®ƒä»¬æ˜¯åŸºæœ¬64ç¼–ç çš„ASCIIæ–‡ä»¶\
  \- Extensions used for PEM certificates are .cer, .crt, .pem, .key files\

\  - ç”¨äºPEMè¯ä¹¦çš„æ‰©å±•åæ˜¯.cerï¼Œ.crtï¼Œ.pemï¼Œ.key Files \
  \- Apache and similar server uses PEM format certificates

\  -  Apacheå’Œç±»ä¼¼çš„æœåŠ¡å™¨ä½¿ç”¨PEMæ ¼å¼è¯ä¹¦

#### **DER Format**

#### ** deræ ¼å¼**

* The DER format is the binary form of the certificate

* deræ ¼å¼æ˜¯è¯ä¹¦çš„äºŒè¿›åˆ¶å½¢å¼
* All types of certificates & private keys can be encoded in DER format

*æ‰€æœ‰ç±»å‹çš„è¯ä¹¦å’Œç§é’¥å¯ä»¥ä»¥DERæ ¼å¼ç¼–ç 
* DER formatted certificates do not contain the "BEGIN CERTIFICATE/END CERTIFICATE" statements

*æ ¼å¼çš„è¯ä¹¦ä¸åŒ…å«â€œå¼€å§‹è¯ä¹¦/ç»“æŸè¯ä¹¦â€è¯­å¥
* DER formatted certificates most often use the â€˜.cerâ€™ and '.der' extensions

*æ ¼å¼çš„è¯ä¹¦æœ€å¸¸ä½¿ç”¨â€œ .cerâ€å’Œâ€œ .derâ€æ‰©å±•å
* DER is typically used in Java Platforms

* deré€šå¸¸åœ¨Javaå¹³å°ä¸­ä½¿ç”¨

#### **P7B/PKCS#7 Format**

#### ** P7B/PKCSï¼ƒ7æ ¼å¼**

* The PKCS#7 or P7B format is stored in Base64 ASCII format and has a file extension of .p7b or .p7c

* PKCSï¼ƒ7æˆ–P7Bæ ¼å¼ä»¥Base64 ASCIIæ ¼å¼å­˜å‚¨ï¼Œå¹¶å…·æœ‰.p7bæˆ–.p7cçš„æ–‡ä»¶æ‰©å±•å
* A P7B file only contains certificates and chain certificates (Intermediate CAs), not the private key

* P7Bæ–‡ä»¶ä»…åŒ…å«è¯ä¹¦å’Œé“¾è¯ä¹¦ï¼ˆä¸­çº§CASï¼‰ï¼Œè€Œä¸æ˜¯ç§é’¥
* The most common platforms that support P7B files are Microsoft Windows and Java Tomcat

*æ”¯æŒP7Bæ–‡ä»¶çš„æœ€å¸¸è§å¹³å°æ˜¯Microsoft Windowså’ŒJava Tomcat

#### **PFX/P12/PKCS#12 Format**

#### ** PFX/P12/PKCSï¼ƒ12æ ¼å¼**

* The PKCS#12 or PFX/P12 format is a binary format for storing the server certificate, intermediate certificates, and the private key in one encryptable file

* PKCSï¼ƒ12æˆ–PFX/P12æ ¼å¼æ˜¯ç”¨äºå­˜å‚¨æœåŠ¡å™¨è¯ä¹¦ï¼Œä¸­é—´è¯ä¹¦å’Œç§é’¥çš„äºŒè¿›åˆ¶æ ¼å¼
* These files usually have extensions such as .pfx and .p12

*è¿™äº›æ–‡ä»¶é€šå¸¸å…·æœ‰.pfxå’Œ.p12ä¹‹ç±»çš„æ‰©å±•å
* They are typically used on Windows machines to import and export certificates and private keys

*å®ƒä»¬é€šå¸¸åœ¨Windowsæœºå™¨ä¸Šç”¨äºå¯¼å…¥å’Œå¯¼å‡ºè¯ä¹¦å’Œç§é’¥

### Formats conversions

###æ ¼å¼è½¬æ¢

**Convert x509 to PEM**

**å°†X509è½¬æ¢ä¸ºPEM **

```
openssl x509 -in certificatename.cer -outform PEM -out certificatename.pem
```

#### **Convert PEM to DER**

#### **å°†PEMè½¬æ¢ä¸ºder **

```
openssl x509 -outform der -in certificatename.pem -out certificatename.der
```

**Convert DER to PEM**

**å°†derè½¬æ¢ä¸ºPEM **

```
openssl x509 -inform der -in certificatename.der -out certificatename.pem
```

**Convert PEM to P7B**

**å°†PEMè½¬æ¢ä¸ºP7B **

**Note:** The PKCS#7 or P7B format is stored in Base64 ASCII format and has a file extension of .p7b or .p7c. A P7B file only contains certificates and chain certificates (Intermediate CAs), not the private key. The most common platforms that support P7B files are Microsoft Windows and Java Tomcat.

**æ³¨æ„ï¼š** PKCSï¼ƒ7æˆ–P7Bæ ¼å¼ä»¥Base64 ASCIIæ ¼å¼å­˜å‚¨ï¼Œå¹¶å…·æœ‰.p7bæˆ–.p7cçš„æ–‡ä»¶æ‰©å±•åã€‚ P7Bæ–‡ä»¶ä»…åŒ…å«è¯ä¹¦å’Œé“¾è¯ä¹¦ï¼ˆä¸­çº§CASï¼‰ï¼Œè€Œä¸æ˜¯ç§é’¥ã€‚ æ”¯æŒP7Bæ–‡ä»¶çš„æœ€å¸¸è§å¹³å°æ˜¯Microsoft Windowså’ŒJava Tomcatã€‚

```
openssl crl2pkcs7 -nocrl -certfile certificatename.pem -out certificatename.p7b -certfile CACert.cer
```

**Convert PKCS7 to PEM**

**å°†PKCS7è½¬æ¢ä¸ºPEM **

```
openssl pkcs7 -print_certs -in certificatename.p7b -out certificatename.pem
```

**Convert pfx to PEM**

**å°†PFXè½¬æ¢ä¸ºPEM **

**Note:** The PKCS#12 or PFX format is a binary format for storing the server certificate, intermediate certificates, and the private key in one encryptable file. PFX files usually have extensions such as .pfx and .p12. PFX files are typically used on Windows machines to import and export certificates and private keys.

**æ³¨æ„ï¼š** PKCSï¼ƒ12æˆ–PFXæ ¼å¼æ˜¯ç”¨äºå­˜å‚¨æœåŠ¡å™¨è¯ä¹¦ï¼Œä¸­é—´è¯ä¹¦å’Œç§é’¥çš„äºŒè¿›åˆ¶æ ¼å¼ã€‚ PFXæ–‡ä»¶é€šå¸¸å…·æœ‰.pfxå’Œ.p12ä¹‹ç±»çš„æ‰©å±•åã€‚ PFXæ–‡ä»¶é€šå¸¸åœ¨Windowsæœºå™¨ä¸Šç”¨äºå¯¼å…¥å’Œå¯¼å‡ºè¯ä¹¦å’Œç§é’¥ã€‚

```
openssl pkcs12 -in certificatename.pfx -out certificatename.pem
```

**Convert PFX to PKCS#8**\

**å°†PFXè½¬æ¢ä¸ºPKCSï¼ƒ8 ** \
**Note:** This requires 2 commands

**æ³¨æ„ï¼š**è¿™éœ€è¦2ä¸ªå‘½ä»¤

**1- Convert PFX to PEM**

** 1-å°†PFXè½¬æ¢ä¸ºPEM **

```
openssl pkcs12 -in certificatename.pfx -nocerts -nodes -out certificatename.pem
```

**2- Convert PEM to PKCS8**

** 2-å°†PEMè½¬æ¢ä¸ºPKCS8 **

```
openSSL pkcs8 -in certificatename.pem -topk8 -nocrypt -out certificatename.pk8
```

**Convert P7B to PFX**\

**å°†P7Bè½¬æ¢ä¸ºPFX ** \
**Note:** This requires 2 commands

**æ³¨æ„ï¼š**è¿™éœ€è¦2ä¸ªå‘½ä»¤

1- **Convert P7B to CER**

1- **å°†P7Bè½¬æ¢ä¸ºCER **

```
openssl pkcs7 -print_certs -in certificatename.p7b -out certificatename.cer
```

**2- Convert CER and Private Key to PFX**

** 2-å°†CERå’Œç§é’¥è½¬æ¢ä¸ºPFX **

```
openssl pkcs12 -export -in certificatename.cer -inkey privateKey.key -out certificatename.pfx -certfile  cacert.cer
```

{% hint style="danger" %}
<img src="../.gitbook/assets/image (307).png" alt="" data-size="original">

<img src =â€œ ../ã€‚gitbook/assets/imageï¼ˆ307ï¼‰.pngâ€œ alt =â€â€œ data-size =â€œ ointernâ€>

Through Security Skills as a Service, we help organizations to **defend against the Dark Hacking Arts**. Security Skills as a Service is an offensive cybersecurity consultancy model that combines an Intelligent Platform with the top-class, globally distributed, offensive security engineers, delivering **high-quality penetration testing results. Security Hubs** bring together offensive penetration testing tactics with human behavioral science, providing real-time insights into threat actors' tradecraft and a **complete assessment of any risks**.

é€šè¿‡å®‰å…¨æŠ€èƒ½ä½œä¸ºæœåŠ¡ï¼Œæˆ‘ä»¬å¸®åŠ©ç»„ç»‡**é˜²å¾¡é»‘æš—é»‘å®¢è‰ºæœ¯**ã€‚ å®‰å…¨æŠ€èƒ½ä½œä¸ºæœåŠ¡æ˜¯ä¸€ç§è¿›æ”»æ€§ç½‘ç»œå®‰å…¨å’¨è¯¢æ¨¡å‹ï¼Œå°†æ™ºèƒ½å¹³å°ä¸é¡¶çº§ï¼Œå…¨çƒåˆ†å¸ƒå¼ï¼Œè¿›æ”»æ€§å®‰å…¨å·¥ç¨‹å¸ˆç»“åˆåœ¨ä¸€èµ·ï¼Œæä¾›**é«˜è´¨é‡çš„æ¸—é€æµ‹è¯•ç»“æœã€‚ å®‰å…¨æ¢çº½**å°†è¿›æ”»æ€§æ¸—é€æµ‹è¯•ç­–ç•¥ä¸äººç±»è¡Œä¸ºç§‘å­¦ç»“åˆåœ¨ä¸€èµ·ï¼Œæä¾›å¯¹å¨èƒå‚ä¸è€…è´¸æ˜“å…‹ç½—å¤«ç‰¹ï¼ˆTradecraftï¼‰çš„å®æ—¶è§è§£ï¼Œå¹¶å¯¹ä»»ä½•é£é™©**è¿›è¡Œå®Œæ•´è¯„ä¼°ã€‚

{% embed url="https://securityhubs.io/" %}
{% endhint %}

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

<summary> <strong>æ”¯æŒhacktrickså¹¶è·å¾—å¥½å¤„ï¼</strong> </summary>

- Do you work in a **cybersecurity company**? Do you want to see your **company advertised in HackTricks**? or do you want to have access to the **latest version of the PEASS or download HackTricks in PDF**? Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

 - æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æ‚¨æ˜¯å¦æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨hacktricks **ä¸­åˆŠç™»å¹¿å‘Šï¼Ÿ è¿˜æ˜¯æ‚¨æƒ³è®¿é—®**æœ€æ–°ç‰ˆæœ¬çš„è±Œè±†æˆ–åœ¨pdf **ä¸­ä¸‹è½½hacktricksï¼Ÿ æ£€æŸ¥[**è®¢é˜…è®¡åˆ’**]ï¼ˆhttps://github.com/sponsors/carlospolopï¼‰ï¼

- Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)

 - å‘ç°[**è±Œè±†å®¶åº­**]ï¼ˆhttps://opensea.io/collection/the-peass-familyï¼‰ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[** nfts **]ï¼ˆhttps://opensea.io/collectionï¼‰ /å®¶åº­å®¶åº­ï¼‰

- Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

 - è·å–[**å®˜æ–¹è±Œè±†å’Œhacktricksèµƒç‰©**]ï¼ˆhttps://peass.creator-spring.comï¼‰

- **Join the** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

 -  **åŠ å…¥** [**ğŸ’¬**]ï¼ˆhttps://emojipedia.org/speech-balloon/ï¼‰[** discord group **]ï¼ˆhttps://discord.gg/hrep4ruj7fï¼‰æˆ–[ **ç”µæŠ¥ç»„**]ï¼ˆhttps://t.me/peassï¼‰æˆ–**åœ¨** Twitter ** [**ğŸ¦**]ï¼ˆhttps://github.com/carloppolop/hacktrickss on ** twitter **ï¼‰ /ree/7af18b62b3bdc423e114444444677a6a73d4043511e9/ \ [https:/emojipedia.org/bird/bird/readme.mdï¼‰eardme.mdï¼‰eghterme.mdï¼‰eghterme.mdï¼‰eghterme.mdï¼‰eghtemplopmbyth

- **Share your hacking tricks by submitting PRs to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)**.**

 -  **é€šè¿‡å°†PRSæäº¤ç»™** [** hacktricks github repo **]ï¼ˆhttps://github.com/carloppolop/hacktricksï¼‰**ã€‚

</details>

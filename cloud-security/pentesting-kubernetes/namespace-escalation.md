

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

<summary> <strong>æ”¯æŒhacktrickså¹¶è·å¾—å¥½å¤„ï¼</strong> </summary>

- Do you work in a **cybersecurity company**? Do you want to see your **company advertised in HackTricks**? or do you want to have access to the **latest version of the PEASS or download HackTricks in PDF**? Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

 - æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æ‚¨æ˜¯å¦æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨hacktricks **ä¸­åˆŠç™»å¹¿å‘Šï¼Ÿ è¿˜æ˜¯æ‚¨æƒ³è®¿é—®**æœ€æ–°ç‰ˆæœ¬çš„è±Œè±†æˆ–åœ¨pdf **ä¸­ä¸‹è½½hacktricksï¼Ÿ æ£€æŸ¥[**è®¢é˜…è®¡åˆ’**]ï¼ˆhttps://github.com/sponsors/carlospolopï¼‰ï¼

- Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)

 - å‘ç°[**è±Œè±†å®¶åº­**]ï¼ˆhttps://opensea.io/collection/the-peass-familyï¼‰ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[** nfts **]ï¼ˆhttps://opensea.io/collectionï¼‰ /å®¶åº­å®¶åº­ï¼‰

- Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

 - è·å–[**å®˜æ–¹è±Œè±†å’Œhacktricksèµƒç‰©**]ï¼ˆhttps://peass.creator-spring.comï¼‰

- **Join the** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

 -  **åŠ å…¥** [**ğŸ’¬**]ï¼ˆhttps://emojipedia.org/speech-balloon/ï¼‰[** discord group **]ï¼ˆhttps://discord.gg/hrep4ruj7fï¼‰æˆ–[ **ç”µæŠ¥ç»„**]ï¼ˆhttps://t.me/peassï¼‰æˆ–**åœ¨** Twitter ** [**ğŸ¦**]ï¼ˆhttps://github.com/carloppolop/hacktrickss on ** twitter **ï¼‰ /ree/7af18b62b3bdc423e114444444677a6a73d4043511e9/ \ [https:/emojipedia.org/bird/bird/readme.mdï¼‰eardme.mdï¼‰eghterme.mdï¼‰eghterme.mdï¼‰eghterme.mdï¼‰eghtemplopmbyth

- **Share your hacking tricks by submitting PRs to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)**.**

 -  **é€šè¿‡å°†PRSæäº¤ç»™** [** hacktricks github repo **]ï¼ˆhttps://github.com/carloppolop/hacktricksï¼‰**ã€‚

</details>


In Kubernetes it's pretty common that somehow **you manage to get inside a namespace** (by stealing some user credentials or by compromising a pod). However, usually you will be interested in **escalating to a different namespace as more interesting things can be found there**.

åœ¨kubernetesä¸­ï¼Œæ‚¨å¾ˆå¸¸è§**æ‚¨è®¾æ³•è¿›å…¥åç§°ç©ºé—´**ï¼ˆé€šè¿‡çªƒå–æŸäº›ç”¨æˆ·å‡­æ®æˆ–é€šè¿‡æŸå®³PODæ¥ï¼‰ã€‚ ä½†æ˜¯ï¼Œé€šå¸¸æ‚¨ä¼šå¯¹**å‡çº§åˆ°å¦ä¸€ä¸ªåç§°ç©ºé—´æ„Ÿå…´è¶£ï¼Œå› ä¸ºåœ¨é‚£é‡Œå¯ä»¥æ‰¾åˆ°æ›´å¤šæœ‰è¶£çš„ä¸œè¥¿ã€‚

Here are some techniques you can try to escape to a different namespace:

è¿™æ˜¯æ‚¨å¯ä»¥å°è¯•é€ƒåˆ°å¦ä¸€ä¸ªåç§°ç©ºé—´çš„ä¸€äº›æŠ€æœ¯ï¼š

## Abuse K8s privileges

Obviously if the account you have stolen have sensitive privileges over the namespace you can to escalate to, you can abuse actions like **creating pods** with service accounts in the NS, **executing** a shell in an already existent pod inside of the ns, or read the **secret** SA tokens.

æ˜¾ç„¶ï¼Œå¦‚æœæ‚¨è¢«ç›—çš„å¸æˆ·å¯¹å¯ä»¥å‡çº§çš„å‘½åç©ºé—´å…·æœ‰æ•æ„Ÿç‰¹æƒï¼Œåˆ™å¯ä»¥æ»¥ç”¨è¯¸å¦‚**åˆ›å»ºpods **çš„æ“ä½œï¼Œå¹¶åœ¨NSä¸­ä½¿ç”¨æœåŠ¡å¸æˆ·ï¼Œ**æ‰§è¡Œ**åœ¨å†…éƒ¨å·²ç»å­˜åœ¨çš„podä¸­çš„å¤–å£³ NSï¼Œæˆ–é˜…è¯»** Secret ** Saä»£å¸ã€‚

For more info about which privileges you can abuse read:

æœ‰å…³æ‚¨å¯ä»¥æ»¥ç”¨å“ªäº›ç‰¹æƒçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯»ï¼š

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}

{ï¼…content-ref url =â€œ abusing-rustroles-clusterroles in-kubernetes/â€œï¼…}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)

[æ»¥ç”¨å¼º - ç¾¤ç°‡ä¸­çš„kubernetes]ï¼ˆæ»¥ç”¨é‡å¤ç¾¤ä½“ç°‡ä¸­çš„kubernetes/ï¼‰/ï¼‰
{% endcontent-ref %}

## Escape to the node

##é€ƒåˆ°èŠ‚ç‚¹
If you can escape to the node either because you have compromised a pod and you can escape or because you ca create a privileged pod and escape you could do several things to steal other SAs tokens:

å¦‚æœæ‚¨å¯ä»¥é€ƒåˆ°èŠ‚ç‚¹ï¼Œå› ä¸ºæ‚¨å·²ç»å¦¥åäº†ä¸€ä¸ªåŠèˆ±ï¼Œæˆ–è€…æ‚¨å¯ä»¥é€ƒè„±ï¼Œæˆ–è€…å› ä¸ºCAåˆ›å»ºä¸€ä¸ªç‰¹æƒåŠèˆ±å¹¶é€ƒè„±ï¼Œæ‚¨å¯ä»¥åšå‡ ä»¶äº‹æ¥çªƒå–å…¶ä»–SASä»¤ç‰Œï¼š

* Check for **SAs tokens mounted in other docker containers** running in the node

*æ£€æŸ¥å®‰è£…åœ¨å…¶ä»–Dockerå®¹å™¨ä¸­çš„** SASä»¤ç‰Œ**åœ¨èŠ‚ç‚¹ä¸­è¿è¡Œ
* Check for new **kubeconfig files in the node with extra permissions** given to the node

*æ£€æŸ¥èŠ‚ç‚¹ä¸­çš„æ–°** kubeconfigæ–‡ä»¶å¸¦æœ‰é¢å¤–çš„æƒé™**ã€‚
* If enabled (or enable it yourself) try to **create mirrored pods of other namespaces** as you might get access to those namespaces default token accounts (I haven't tested this yet)

*å¦‚æœå¯ç”¨ï¼ˆæˆ–è‡ªå·±å¯ç”¨ï¼‰ï¼Œè¯·å°è¯•**åˆ›å»ºå…¶ä»–åç§°ç©ºé—´çš„é•œåƒåŠèˆ±**ï¼Œå› ä¸ºæ‚¨å¯èƒ½å¯ä»¥è®¿é—®è¿™äº›åç§°ç©ºé—´é»˜è®¤ä»¤ç‰Œå¸æˆ·ï¼ˆæˆ‘å°šæœªå¯¹æ­¤è¿›è¡Œæµ‹è¯•ï¼‰

All these techniques are explained in:

æ‰€æœ‰è¿™äº›æŠ€æœ¯éƒ½åœ¨ä»¥ä¸‹è§£é‡Šï¼š

{% content-ref url="../../pentesting/pentesting-kubernetes/attacking-kubernetes-from-inside-a-pod.md" %}

{% content-ref url="../../pentesting/pentesting-kubernetes/attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](../../pentesting/pentesting-kubernetes/attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}



<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

<summary> <strong>æ”¯æŒhacktrickså¹¶è·å¾—å¥½å¤„ï¼</strong> </summary>

- Do you work in a **cybersecurity company**? Do you want to see your **company advertised in HackTricks**? or do you want to have access to the **latest version of the PEASS or download HackTricks in PDF**? Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

 - æ‚¨åœ¨**ç½‘ç»œå®‰å…¨å…¬å¸**å·¥ä½œå—ï¼Ÿ æ‚¨æ˜¯å¦æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨hacktricks **ä¸­åˆŠç™»å¹¿å‘Šï¼Ÿ è¿˜æ˜¯æ‚¨æƒ³è®¿é—®**æœ€æ–°ç‰ˆæœ¬çš„è±Œè±†æˆ–åœ¨pdf **ä¸­ä¸‹è½½hacktricksï¼Ÿ æ£€æŸ¥[**è®¢é˜…è®¡åˆ’**]ï¼ˆhttps://github.com/sponsors/carlospolopï¼‰ï¼

- Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)

 - å‘ç°[**è±Œè±†å®¶åº­**]ï¼ˆhttps://opensea.io/collection/the-peass-familyï¼‰ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[** nfts **]ï¼ˆhttps://opensea.io/collectionï¼‰ /å®¶åº­å®¶åº­ï¼‰

- Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

 - è·å–[**å®˜æ–¹è±Œè±†å’Œhacktricksèµƒç‰©**]ï¼ˆhttps://peass.creator-spring.comï¼‰

- **Join the** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

 -  **åŠ å…¥** [**ğŸ’¬**]ï¼ˆhttps://emojipedia.org/speech-balloon/ï¼‰[** discord group **]ï¼ˆhttps://discord.gg/hrep4ruj7fï¼‰æˆ–[ **ç”µæŠ¥ç»„**]ï¼ˆhttps://t.me/peassï¼‰æˆ–**åœ¨** Twitter ** [**ğŸ¦**]ï¼ˆhttps://github.com/carloppolop/hacktrickss on ** twitter **ï¼‰ /ree/7af18b62b3bdc423e114444444677a6a73d4043511e9/ \ [https:/emojipedia.org/bird/bird/readme.mdï¼‰eardme.mdï¼‰eghterme.mdï¼‰eghterme.mdï¼‰eghterme.mdï¼‰eghtemplopmbyth

- **Share your hacking tricks by submitting PRs to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)**.**

 -  **é€šè¿‡å°†PRSæäº¤ç»™** [** hacktricks github repo **]ï¼ˆhttps://github.com/carloppolop/hacktricksï¼‰**ã€‚

</details>


